function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}var t=globalThis,o={},n={},s=t.parcelRequireea2c;null==s&&((s=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return o[e]=s,t.call(s.exports,s,s.exports),s.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequireea2c=s),(0,s.register)("hkeot",function(t,o){e(t.exports,"symbols",()=>s),e(t.exports,"request",()=>f),e(t.exports,"metroError",()=>m),e(t.exports,"response",()=>l),e(t.exports,"client",()=>i),e(t.exports,"url",()=>d),e(t.exports,"formdata",()=>function e(...t){var o=new FormData;for(let e of t)if(e instanceof FormData)for(let t of e.entries())o.append(t[0],t[1]);else if(e&&"object"==typeof e)for(let t of Object.entries(e))if(Array.isArray(t[1]))for(let e of t[1])o.append(t[0],e);else o.append(t[0],t[1]);else throw new m("metro.formdata: unknown option type, only FormData or Object supported",e);return Object.freeze(o),new Proxy(o,{get:(t,o,n)=>{switch(o){case s.isProxy:return!0;case s.source:return t;case"with":return function(...o){return e(t,...o)};case"toString":case"toJSON":return function(){return t[o]()}}return t[o]}})}),e(t.exports,"trace",()=>g);let n="https://metro.muze.nl/details/",s={isProxy:Symbol("isProxy"),source:Symbol("source")};class a{#e={url:"undefined"!=typeof window?window.location:"https://localhost"};#t=["get","post","put","delete","patch","head","options","query"];static tracers={};constructor(...e){for(let t of e)if("string"==typeof t||t instanceof String)this.#e.url=""+t;else if(t instanceof a)Object.assign(this.#e,t.#e);else if(t instanceof Function)this.#r([t]);else if(t&&"object"==typeof t)for(let e in t)"middlewares"==e?this.#r(t[e]):"function"==typeof t[e]?this.#e[e]=t[e](this.#e[e],this.#e):this.#e[e]=t[e];for(let e of(this.#e.verbs&&(this.#t=this.#e.verbs,delete this.#e.verbs),this.#t))this[e]=async function(...t){return this.#o(f(this.#e,...t,{method:e.toUpperCase()}))};Object.freeze(this)}#r(e){"function"==typeof e&&(e=[e]);let t=e.findIndex(e=>"function"!=typeof e);if(t>=0)throw m("metro.client: middlewares must be a function or an array of functions "+n+"client/invalid-middlewares-value/",e[t]);Array.isArray(this.#e.middlewares)||(this.#e.middlewares=[]),this.#e.middlewares=this.#e.middlewares.concat(e)}#o(e){let t;if(!e.url)throw m("metro.client."+r.method.toLowerCase()+": Missing url parameter "+n+"client/missing-url-param/",e);let o=[async e=>(e[s.isProxy]&&(e=e[s.source]),l(await fetch(e)))].concat(this.#e?.middlewares?.slice()||[]);for(let e of(this.#e,o))t=function(e,t){return async function(o){let n;let s=Object.values(a.tracers);for(let e of s)e.request&&e.request.call(e,o);for(let a of(n=await t(o,e),s))a.response&&a.response.call(a,n);return n}}(t,e);return t(e)}with(...e){return new a(this,...e)}}function i(...e){return new a(...e)}function c(e,t){let o=t.body;return o||(null===e?o=new ReadableStream:e instanceof ReadableStream?o=e:e instanceof Blob?o=e.stream():o=new ReadableStream({start(t){let o;switch(typeof e){case"object":if("function"==typeof e.toString)o=e.toString();else if(e instanceof FormData)o=new URLSearchParams(e).toString();else if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))o=e;else throw m("Cannot convert body to ReadableStream",e);break;case"string":case"number":case"boolean":o=e;break;default:throw m("Cannot convert body to ReadableStream",e)}t.enqueue(o),t.close()}})),new Proxy(o,{get(t,o,n){switch(o){case s.isProxy:return!0;case s.source:return e;case"toString":return function(){return""+e}}return"object"==typeof e&&o in e?"function"==typeof e[o]?function(...t){return e[o].apply(e,t)}:e[o]:o in t&&"toString"!=o?"function"==typeof t[o]?function(...e){return t[o].apply(t,e)}:t[o]:void 0},has:(t,o)=>o in e,ownKeys:t=>Reflect.ownKeys(e),getOwnPropertyDescriptor:(t,o)=>Object.getOwnPropertyDescriptor(e,o)})}function f(...e){let t={url:"undefined"!=typeof window?window.location:"https://localhost/",duplex:"half"};for(let o of e)"string"==typeof o||o instanceof URL||o instanceof URLSearchParams?t.url=d(t.url,o):o&&(o instanceof FormData||o instanceof ReadableStream||o instanceof Blob||o instanceof ArrayBuffer||o instanceof DataView)?t.body=o:o&&"object"==typeof o&&Object.assign(t,function(e,t){let o=t||{};for(let n of(!o.url&&t.url&&(o.url=t.url),["method","headers","body","mode","credentials","cache","redirect","referrer","referrerPolicy","integrity","keepalive","signal","priority","url"]))if("function"==typeof e[n])e[n](o[n],o);else if(void 0!==e[n]){if("url"==n)o.url=d(o.url,e.url);else if("headers"==n)for(let[n,s]of(o.headers=new Headers(t.headers),e.headers instanceof Headers||(e.headers=new Headers(e.headers)),e.headers.entries()))o.headers.set(n,s);else o[n]=e[n]}return o}(o,t));let o=t.body;!o||"object"!=typeof o||o instanceof String||o instanceof ReadableStream||o instanceof Blob||o instanceof ArrayBuffer||o instanceof DataView||o instanceof FormData||o instanceof URLSearchParams||"undefined"!=typeof TypedArray&&o instanceof TypedArray||(t.body=JSON.stringify(o));let n=new Request(t.url,t);return Object.freeze(n),new Proxy(n,{get(e,t,n){switch(t){case s.source:return e;case s.isProxy:return!0;case"with":return function(...t){return f(e,...t)};case"toString":case"toJSON":case"blob":case"text":case"json":return function(){return e[t].apply(e)};case"body":if(o||(o=e.body),o){if(o[s.isProxy])return o;return c(o,e)}}return e[t]}})}function u(e,t){let o=t||{};for(let n of(!o.url&&t.url&&(o.url=t.url),["status","statusText","headers","body","url","type","redirected"]))"function"==typeof e[n]?e[n](o[n],o):void 0!==e[n]&&("url"==n?o.url=new URL(e.url,o.url||"https://localhost/"):o[n]=e[n]);return o}function l(...e){let t={};for(let o of e)"string"==typeof o?t.body=o:o instanceof Response?Object.assign(t,u(o,t)):o&&"object"==typeof o&&(o instanceof FormData||o instanceof Blob||o instanceof ArrayBuffer||o instanceof DataView||o instanceof ReadableStream||o instanceof URLSearchParams||o instanceof String||"undefined"!=typeof TypedArray&&o instanceof TypedArray?t.body=o:Object.assign(t,u(o,t)));let o=new Response(t.body,t);return Object.freeze(o),new Proxy(o,{get(e,o,n){switch(o){case s.isProxy:return!0;case s.source:return e;case"with":return function(...t){return l(e,...t)};case"body":if(!t.body)return c("",e);if(t.body[s.isProxy])return t.body;return c(t.body,e);case"ok":return e.status>=200&&e.status<400;case"headers":return e.headers;default:if(o in t&&"toString"!=o)return t[o];if(o in e&&"toString"!=o){if("function"==typeof e[o])return function(...t){return e[o].apply(e,t)};return e[o]}}}})}function p(e,t){"function"==typeof t?t(e.searchParams,e):(t=new URLSearchParams(t)).forEach((t,o)=>{e.searchParams.append(o,t)})}function d(...e){let t=["hash","host","hostname","href","password","pathname","port","protocol","username","search","searchParams"],o=new URL("https://localhost/");for(let s of e)if("string"==typeof s||s instanceof String)o=new URL(s,o);else if(s instanceof URL||"undefined"!=typeof Location&&s instanceof Location)o=new URL(s);else if(s instanceof URLSearchParams)p(o,s);else if(s&&"object"==typeof s)for(let a in s)if("search"==a)"function"==typeof s.search?s.search(o.search,o):o.search=new URLSearchParams(s.search);else if("searchParams"==a)p(o,s.searchParams);else{if(!t.includes(a))throw m("metro.url: unknown url parameter "+n+"url/unknown-param-name/",a);if("function"==typeof s[a])s[a](o[a],o);else if("string"==typeof s[a]||s[a]instanceof String||"number"==typeof s[a]||s[a]instanceof Number||"boolean"==typeof s[a]||s[a]instanceof Boolean)o[a]=""+s[a];else if("object"==typeof s[a]&&s[a].toString)o[a]=s[a].toString();else throw m("metro.url: unsupported value for "+a+" "+n+"url/unsupported-param-value/",e[a])}else throw m("metro.url: unsupported option value "+n+"url/unsupported-option-value/",s);return Object.freeze(o),new Proxy(o,{get(e,t,o){switch(t){case s.isProxy:return!0;case s.source:return e;case"with":return function(...t){return d(e,...t)};case"toString":case"toJSON":return function(){return e[t]()}}return e[t]}})}let y=(e,...t)=>{console.error("Ⓜ️  ",e,...t)},h=(e,...t)=>{console.info("Ⓜ️  ",e,...t)},w=e=>{console.group("Ⓜ️  "+e)},b=e=>{console.groupEnd("Ⓜ️  "+e)};function m(e,...t){return y(e,...t),Error(e,...t)}let g={add(e,t){a.tracers[e]=t},delete(e){delete a.tracers[e]},clear(){a.tracers={}},group(){let e=0;return{request:t=>{w(++e),h(t?.url,t)},response:t=>{h(t?.body?t.body[s.source]:null,t),b(e),e--}}}}});var a=s("hkeot");window.metro=a;
//# sourceMappingURL=browser.js.map
