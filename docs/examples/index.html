<!doctype html>
<html lang="en" color-mode="user">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="All examples from the MetroJs documentation." />

<link rel="dns-prefetch" href="https://cdn.jsdelivr.net"/>

<link rel="prefetch" href="https://cdn.jsdelivr.net/npm/@muze-nl/metro/dist/browser.js"/>
<link rel="prefetch" href="https://cdn.jsdelivr.net/npm/@muze-nl/metro/dist/everything.js"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mvp.css@1.14.0/mvp.css" />

<link rel="stylesheet" href="example-helper.css" />
<script src="example-helper.js"></script>

<header>
    <nav>
        <a href="https://metro.muze.nl/"><img alt="MetroJS Logo" src="https://metro.muze.nl/logo.svg"></a>
        <button
            aria-controls="menu"
            aria-expanded="false"
            aria-label="Toggle Menu"
            onfocusin="this.setAttribute('aria-expanded', 'true')"
            onfocusout="this.setAttribute('aria-expanded', 'false')"
            onkeydown="if (event.keyCode === 27) this.blur()"
        >Open Menu</button>
        <ul id="menu" aria-label="Close Menu">
            <li><a href="#">Introduction</a>
                <ul>
                    <li><a href="#/introduction.1.js">Example</a></li>
                </ul>
            </li>
            <li><a href="#">Quickstart</a>
                <ul>
                    <li><a href="#/quickstart.1.html">Example 1</a></li>
                    <li><a href="#/quickstart.2.html">Example 2</a></li>
                    <li><a href="#/quickstart.3.js">Example 3</a></li>
                </ul>
            </li>
            <li><a href="#">Middleware</a>
                <ul>
                    <li><a href="#/middleware.1.js">Example 1</a></li>
                    <li><a href="#/middleware.2.js">Example 2</a></li>
                    <li><a href="#/middleware/echomock.1.js">Echomock Example</a></li>
                    <li><a href="#/middleware/errormock.1.js">Errormock Example</a></li>
                    <li><a href="#/middleware/json.1.js">Json Example 1</a></li>
                    <li><a href="#/middleware/json.2.js">Json Example 2</a></li>
                    <li><a href="#/middleware/oauth2.1.js">Oauth2 Example</a></li>
                    <li><a href="#/middleware/thrower.1.js">Thrower Example 1</a></li>
                    <li><a href="#/middleware/thrower.2.js">Thrower Example 2</a></li>
                </ul>
            </li>
            <li><a href="#">Debugging</a>
                <ul>
                    <li><a href="#/debugging.1.js">Example 1</a></li>
                    <li><a href="#/debugging.2.js">Example 2</a></li>
                </ul>
            </li>
            <li><a href="#">Reference</a>
                <ul>
                    <li><a href="#/reference/assert/fails.1.js">Assert fails Example</a></li>
                    <li><a href="#/reference/assert/oneOf.1.js">Assert oneOf Example</a></li>
                    <li><a href="#/reference/assert/optional.1.js">Assert optional Example</a></li>
                    <li><a href="#/reference/client/get.1.js">Client get Example</a></li>
                    <li><a href="#/reference/client/post.1.js">Client post Example</a></li>
                    <li><a href="#/reference/client/README.1.js">Client Example 1</a></li>
                    <li><a href="#/reference/client/README.2.js">Client Example 2</a></li>
                    <li><a href="#/reference/client/README.3.js">Client Example 3</a></li>
                    <li><a href="#/reference/formdata/README.1.js">Formdata Example</a></li>
                    <li><a href="#/reference/request/README.1.js">Request Example</a></li>
                    <li><a href="#/reference/response/README.1.js">Response Example</a></li>
                    <li><a href="#/reference/trace/add.1.js">Trace add Example</a></li>
                    <li><a href="#/reference/trace/group.1.js">Trace group Example</a></li>
                    <li><a href="#/reference/trace/README.1.js">Trace Example</a></li>
                    <li><a href="#/reference/url/README.1.js">Url Example</a></li>
                </ul>
            </li>
            <li><a href="">Tutorials</a>
                <ul>
                    <li><a href="#/tutorials.1.js">Example 1</a></li>
                    <li><a href="#/tutorials.2.js">Example 2</a></li>
                    <li><a href="#/tutorials.3.html">Example 3</a></li>
                    <li><a href="#/tutorials.4.js">Example 4</a></li>
                    <li><a href="#/tutorials.5.js">Example 5</a></li>
                    <li><a href="#/tutorials.6.js">Example 6</a></li>
                    <li><a href="#/tutorials.7.js">Example 7</a></li>
                    <li><a href="#/tutorials.8.js">Example 8</a></li>
                    <li><a href="#/tutorials.9.js">Example 9</a></li>
                    <li><a href="#/tutorials.10.js">Example 10</a></li>
                    <li><a href="#/tutorials.11.js">Example 11</a></li>
                    <li><a href="#/tutorials.12.js">Example 12</a></li>
                    <li><a href="#/tutorials.13.js">Example 13</a></li>
                    <li><a href="#/tutorials.14.js">Example 14</a></li>
                </ul>
            </li>
<!--
            <li><a href="#">Asserts</a>
                <ul>
                    <li><a href="#/asserts.1.js">Example 1</a></li>
                    <li><a href="#/asserts.2.js">Example 2</a></li>
                    <li><a href="#/asserts.3.js">Example 3</a></li>
                </ul>
            </il>
-->
        </ul>
    </nav>
    <h1><title>MetroJS - Examples</title></h1>
    <p>This page contains all examples from the MetroJs documentation.</p>
    <p>Select an example from the menu to see the code and the result.</p>
</header>

<main hidden>
    <section>
        <h2>Code</h2>
        <pre><code></code></pre>
    </section>
    <section>
        <h2>Result</h2>
        <output>
            <ul></ul>
        </output>
    </section>
</main>

<script type="importmap">
    {
      "imports": {
        "@muze-nl/metro": "https://cdn.jsdelivr.net/npm/@muze-nl/metro",
        "@muze-nl/metro/src/mw/echo.mock.mjs": "https://cdn.jsdelivr.net/npm/@muze-nl/metro/src/mw/echo.mock.mjs",
        "@muze-nl/metro/src/mw/error.mock.mjs": "https://cdn.jsdelivr.net/npm/@muze-nl/metro/src/mw/error.mock.mjs",
        "@muze-nl/metro/src/mw/json.mjs": "https://cdn.jsdelivr.net/npm/@muze-nl/metro/src/mw/json.mjs",
        "@muze-nl/metro/src/mw/jsonmw": "https://cdn.jsdelivr.net/npm/@muze-nl/metro/src/mw/json.mjs",
        "@muze-nl/metro/src/mw/oauth2.mjs": "https://cdn.jsdelivr.net/npm/@muze-nl/metro/src/mw/oauth2.mjs",
        "@muze-nl/metro/src/mw/thrower.mjs": "https://cdn.jsdelivr.net/npm/@muze-nl/metro/src/mw/thrower.mjs"
      }
    }
</script>

<script>
    window.addEventListener('error', errorEvent => console.error(errorEvent.error.message))
    window.addEventListener('hashchange', () => document.location.reload())
    window.addEventListener('unhandledrejection', promiseRejectionEvent => console.error(promiseRejectionEvent.reason))

    const outputList = document.querySelector('output ul')
    const file = document.location.hash.split('#')[1]

    console.error = error => outputList.insertAdjacentHTML('beforeend', `<li class="error">${error}</li>`)
    console.log = message => outputList.insertAdjacentHTML('beforeend', `<li>${htmlEncoded(JSON.stringify(message, null, 4))}</li>`)

    if (file && file !== '') {
        let title = file.replace('.1.', '.').replace('README', '')
            // Remove the extension
            .split('.').slice(0, -1).join(' ')
            // Capitalize the first letter of each word
            .split('/').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')

        // Mark current example in the menu
        document.querySelectorAll('nav a').forEach(a => a.classList.remove('selected'))
        document.querySelector(`nav a[href="#${file}"]`).classList.add('selected')

        document.title = `MetroJS - Examples - ${title}`
        document.querySelector('main').attributes.removeNamedItem('hidden')

        const container = document.querySelector('pre > code')
        const fileType = file.split('.').pop()

        fetch(`.${file}`)
            .then(response => response.ok ? response.text() : Promise.reject(response))
            .then(text => loadExample(fileType, text))
            .then(elements => addElements(container, elements))
            .catch(async error => {
                let errorMessage = `An error occurred while loading the  <code>${file}</code> example: `

                if (error instanceof Error) {
                    errorMessage += ` ${error.message}`
                } else if (typeof error === 'object') {
                    if (typeof error.text === 'function') {
                        errorMessage += ` ${await error.text()}`
                    }
                }

                console.error(errorMessage)
            })
    }
</script>
</html>